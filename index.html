<!doctype html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <title>Basquete Anota AI</title>
    <link rel="icon" type="image/png" href="./assets/images/ball.png" />
    <script src="https://cdn.jsdelivr.net/npm/phaser@2.6.2/build/phaser.min.js"></script>
    <!-- Google Ads -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2210446009817515" crossorigin="anonymous"></script>
    <!-- Google Tag Manager -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-WSPVKJTS0V"></script>

    <style type="text/css">
        body {
            display: flex;
            align-items: center;
            justify-content: center;
            max-width: 100vw;
            height: 100vh;
            margin: 0;
            box-sizing: border-box;
            background-image: url('./assets/images/fundoGame.svg');
            background-repeat: no-repeat;
            background-size: cover;
            background-color: #009aff;
            font-family: Arial, Helvetica, sans-serif;
        }
        
        canvas {
            border: 2px solid rgb(243, 243, 243);
            border-radius: 10px;    
            object-fit: cover;
            width: 100% !important;
            max-width: 400px !important;
        }

        @media screen and (max-width: 750px){
            body {
                padding: 0;
                background-image: none;
            }

            canvas {
                margin: 0;
                padding: 0;
                border: none;
            }
        }
        
        @media screen and (min-height: 625px) and (max-width: 750px) {
            canvas {
                margin-top: 7vh;
            }
        }

        @media(max-width: 500px) { 
            .adsbygoogle-noablate {
                display: block !important;
                position: fixed !important; 
                width: 100% !important;
                bottom: 0;
                left: 0;
            }
            .responsive-ads { 
                /* display: none; */
                /* min-height: 60px !important;   */
                /* bottom: 0; */
                /* left: 0; */
            } 
        } 
    </style>
</head>
<body>

<!-- Google ADS -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2210446009817515" crossorigin="anonymous"></script>

<!-- Anúncio responsivo -->
<ins class="adsbygoogle responsive-ads"
    style="display: block !important;"
    data-ad-client="ca-pub-2210446009817515"
    data-ad-slot="4580182721"
    data-ad-format="auto" 
    data-full-width-responsive="true">
</ins>

<script>
    (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<script type="text/javascript">
    var screenWidth = screen.width;
    var screenHeight = screen.height;
    var mobile;
    var game;

    // Função para inicializar áudio
    function initAudio() {
        if (game.device.iOS || game.device.android || game.device.windowsPhone) {
            game.input.touch.preventDefault = false;
            document.addEventListener('touchstart', function() {
                if (game.sound.context && game.sound.context.state === 'suspended') {
                    game.sound.context.resume();
                }
            }, false);
        }
    }

    mobile = screenWidth <= 750;

    // Configuração do jogo
    var gameConfig = {
        width: mobile ? screenWidth : 400,
        height: mobile ? screenHeight : 625,
        renderer: Phaser.CANVAS,
        parent: '',
        state: {
            preload: preload,
            create: create,
            update: update
        },
        transparent: false,
        antialias: false,
        audio: {
            noAudio: false,
            disableWebAudio: false
        }
    };

    game = new Phaser.Game(gameConfig);

    // [Todo o resto do código permanece igual ao original, apenas atualizando as funções de áudio]

    function create() {
        game.physics.startSystem(Phaser.Physics.P2JS);
        game.physics.p2.setImpactEvents(true);
        game.physics.p2.restitution = 0.63;
        game.physics.p2.gravity.y = 0;

        collisionGroup = game.physics.p2.createCollisionGroup();

        // Inicialização do áudio
        game.sound.boot();
        
        score_sound = game.add.audio('score', 1);
        backboard = game.add.audio('backboard', 0.5);
        whoosh = game.add.audio('whoosh', 1);
        fail = game.add.audio('fail', 0.1);
        spawn = game.add.audio('spawn', 1);

        // Inicializar áudio para dispositivos móveis
        initAudio();

        // [Resto do código da função create permanece igual]
    }

    function hitRim() {
        if (backboard && backboard.isReady) {
            try {
                backboard.play();
            } catch (e) {
                console.log('Erro ao tocar som:', e);
            }
        }
    }

    function launch(x_traj) {
        if (ball.launched === false) {
            ball.body.setCircle(36);
            ball.body.setCollisionGroup(collisionGroup);
            current_best_text.text = '';
            current_best_score_text.text = '';
            ball.launched = true;
            game.physics.p2.gravity.y = 3000;
            game.add.tween(ball.scale).to({x: 0.6, y: 0.6}, 500, Phaser.Easing.Linear.None, true);
            ball.body.velocity.x = x_traj;
            ball.body.velocity.y = -1750;
            ball.body.rotateRight(x_traj / 3);
            
            if (whoosh && whoosh.isReady) {
                try {
                    whoosh.play();
                } catch (e) {
                    console.log('Erro ao tocar som:', e);
                }
            }
        }
    }

    // [O resto do código permanece exatamente igual ao original]

</script>
<script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"rayId":"9150916acb76f252","serverTiming":{"name":{"cfExtPri":true,"cfL4":true,"cfSpeedBrain":true,"cfCacheStatus":true}},"version":"2025.1.0","token":"8f05bd1d86b34a4ba40ca901367f3259"}' crossorigin="anonymous"></script>
</body>
</html>
