<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Basquete Anota AI</title>
    <link rel="icon" type="imagem/png" href="./assets/images/ball.png" />
    <!-- Carregamento do Phaser -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/phaser/2.6.2/phaser.min.js"></script>
    <!-- Google Adds -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2210446009817515" crossorigin="anonymous"></script>
    <!-- Google Tag Manager -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-WSPVKJTS0V"></script>

    <!-- [Manter os estilos CSS exatamente como estão] -->
    <style type="text/css">
        /* ... seus estilos ... */
    </style>
</head>
<body>

<!-- [Manter o código do Google ADS exatamente como está] -->

<script type="text/javascript">
document.addEventListener('DOMContentLoaded', function() {
    // Verificar se o Phaser está disponível
    if (typeof Phaser === 'undefined') {
        console.error('Phaser não está carregado!');
        document.body.innerHTML = '<p style="color: white; text-align: center;">Erro ao carregar o jogo. Por favor, recarregue a página.</p>';
        return;
    }

    // Funções de cookie
    const getCookie = () => {
        var scoreCookie = '0';
        if (!document.cookie.includes('BestScore')) {
            document.cookie = `BestScore=0`;
            return '0';
        }
        document.cookie.split(';').forEach(cookie => {
            if (cookie.includes('BestScore')) {
                scoreCookie = cookie.split('=')[1];
            }
        });
        return scoreCookie;
    };

    const setCookie = (newBestScore) => {
        document.cookie = `BestScore=${newBestScore}`;
    };

    // Configurações iniciais
    var screenWidth = window.innerWidth;
    var screenHeight = window.innerHeight;
    var mobile = screenWidth <= 750;
    var bestScoreCookie = getCookie();

    // Variáveis do jogo
    var game;
    var hoop, left_rim, right_rim, ball, front_rim;
    var current_score = 0, current_score_text, high_score = 0, high_score_text, current_best_text;
    var score_sound, backboard, whoosh, fail, spawn;
    var moveInTween, fadeInTween, moveOutTween, fadeOutTween, emoji, emojiName;
    var collisionGroup;
    var location_interval;
    var isDown = false;
    var start_location;
    var end_location;

    // Funções do jogo
    function preload() {
        try {
            game.load.image('ball', './assets/images/ball.png');
            game.load.image('hoop', './assets/images/hoop.png');
            game.load.image('side rim', './assets/images/side_rim.png');
            game.load.image('front rim', './assets/images/front_rim.png');

            // Carregar emojis
            for (var i = 0; i < 5; i++) {
                game.load.image('win' + i, './assets/images/win' + i + '.png');
                game.load.image('lose' + i, './assets/images/lose' + i + '.png');
            }

            // Carregar áudios
            game.load.audio('score', './assets/audio/score.wav');
            game.load.audio('backboard', './assets/audio/backboard.wav');
            game.load.audio('whoosh', './assets/audio/whoosh.wav');
            game.load.audio('fail', './assets/audio/fail.wav');
            game.load.audio('spawn', './assets/audio/spawn.wav');
        } catch (error) {
            console.error('Erro no preload:', error);
        }
    }

    // [Manter as funções create, update, hitRim, createBall, click, release, launch exatamente como estão]

    // Inicialização do jogo
    try {
        game = new Phaser.Game(
            mobile ? screenWidth : 400,
            mobile ? screenHeight : 625,
            Phaser.CANVAS,
            '',
            {
                preload: preload,
                create: create,
                update: update
            }
        );
    } catch (error) {
        console.error('Erro ao inicializar o jogo:', error);
        document.body.innerHTML = '<p style="color: white; text-align: center;">Erro ao inicializar o jogo. Por favor, recarregue a página.</p>';
    }
});
</script>

</body>
</html>
